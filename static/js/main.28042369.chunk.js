(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{39:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),s=a(17),i=a.n(s),l=(a(39),a(40),a(6)),o=Object(r.createContext)();function d(e){var t=Object(r.useState)(null),a=Object(l.a)(t,2),c={modal:a[0],setModal:a[1]};return Object(n.jsx)(o.Provider,{value:c,children:e.children})}var u=a(16),b=a(3),x=a(4);function h(e){var t=e.text,a=Array.from(t),r={hidden:{opacity:0},show:{opacity:1}};return Object(n.jsx)(x.b.div,{children:Object(n.jsx)(x.b.span,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{delayChildren:.7,staggerChildren:.15,staggerDirection:1}}},initial:"hidden",animate:"show",children:a.map((function(e,t){return Object(n.jsx)(x.b.span,{variants:r,size:50,className:"text-gray-100 font-title uppercase text-6xl sm:text-8xl",children:e},t)}))})})}var j=a(9),m=a.n(j),f=a(11),p=a(13),g=a(10),v=a.n(g);function O(e){var t=e.value,a=e.handleChange,r=e.error;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("input",{className:"px-3 py-3 placeholder-gray-500 placeholder-opacity-50 text-gray-700 bg-white rounded tracking-wider text-md font-semibold w-full shadow-md focus:outline-none focus:shadow-outline",placeholder:"https://ozon.ru/context/item/id/5151551/",type:"text",value:t,onChange:a,style:{transition:"all .15s ease"}}),r&&Object(n.jsx)("div",{className:"pt-1 w-full text-sm font-semibold text-red-500 tracking-wider",children:r})]})}var w=c.a.memo((function(e){var t=e.option,a=e.handleClick;return Object(n.jsx)("div",{className:"flex items-center cursor-pointer bg-white text-gray-600 transition duration-200 hover:bg-gray-600 hover:text-white",children:Object(n.jsx)(x.b.a,{href:"".concat(t.slug),onClick:function(e){e.preventDefault(),a(e,t)},className:"py-2 ml-6 text-md font-semibold w-full whitespace-no-wrap",variants:{opened:{opacity:1,x:0,transition:{duration:.4,type:"tween"}},closed:{opacity:0,x:"-20%"}},initial:"closed",animate:"opened",children:t.name})})})),y="/api/categories",N="/api/items",k=c.a.memo((function(e){var t=e.option,a=e.handleClick,c=Object(r.useState)(!1),s=Object(l.a)(c,2),i=s[0],o=s[1],d=Object(r.useState)([]),u=Object(l.a)(d,2),b=u[0],h=u[1],j=Object(r.useState)(!1),p=Object(l.a)(j,2),O=p[0],y=p[1];return Object(r.useEffect)((function(){var e=g.CancelToken.source(),a=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat("/api/subcategories","/").concat(a),t.prev=1,t.next=4,v.a.get(n,{cancelToken:e.token});case 4:r=t.sent,h(r.data),y(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return i&&0===b.length&&t.slug&&(y(!0),a(t.slug)),function(){e.cancel("Query was cancelled"),y(!1)}}),[i,t,b]),Object(n.jsxs)("div",{className:"cursor-pointer bg-white text-gray-600 transition duration-200 hover:bg-gray-600 hover:text-white",children:[Object(n.jsxs)("a",{href:"".concat(t.slug),onClick:function(e){e.preventDefault(),o(!i)},className:"block py-2 text-md font-semibold w-full whitespace-no-wrap",children:[Object(n.jsx)(x.b.i,{className:"mx-4 my-2 fas fa-chevron-right",variants:{rotateOpen:{rotate:[0,90],transition:{duration:.4}},rotateClose:{rotate:[90,0],transition:{duration:.4}}},animate:i?"rotateOpen":"rotateClose"}),t.name]}),Object(n.jsx)("div",{className:i?"block":"hidden",children:O?Object(n.jsx)("div",{className:"p-2 bg-white text-gray-600 text-xl",children:Object(n.jsx)("i",{className:"fas fa-spinner animate-spin"})}):b.map((function(e){return Object(n.jsx)(w,{option:e,handleClick:a},e.slug)}))})]})}));function C(e,t){Object(r.useEffect)((function(){var a=function(a){e.current&&!e.current.contains(a.target)&&t(a)};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),function(){document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}}),[e,t])}function L(e){var t=/^(.*)?(\d{9,})\/?$/,a=/^((https?):\/\/)?(www\.)?ozon\.ru(\/.*)?$/;function n(e){return t.test(e)}return function(e){var r,c={};if(e)if(n(e))c={inputIsValid:!0,validationMsg:"",itemId:e.match(t)[2]};else if(r=e,a.test(r)){var s=new URL(e).pathname;c=n(s)?{inputIsValid:!0,validationMsg:"",itemId:s.match(t)[2]}:{inputIsValid:!1,validationMsg:"URL should contain product's ID",itemId:0}}else c={inputIsValid:!1,validationMsg:"ID should consists of 9 or more digits",itemId:0};else c={inputIsValid:!1,validationMsg:"Enter product's page URL or product's ID",itemId:0};return c}(e)}var T=c.a.memo((function(e){var t=e.options,a=e.category,c=e.changeCategory,s=Object(r.useState)(!1),i=Object(l.a)(s,2),o=i[0],d=i[1],u=Object(r.useRef)(null);C(u,(function(){return b()}));var b=function(){d(!1)},x=function(e,t){c(t),b()};return Object(n.jsxs)("div",{className:"z-30",ref:u,children:[Object(n.jsx)("button",{className:"w-full font-semibold uppercase text-left px-3 py-3 mr-1 rounded shadow hover:shadow-lg outline-none focus:outline-none bg-white text-gray-600",style:{transition:"all .15s ease"},type:"button",onClick:function(){o?b():d(!0)},children:a.name?a.name:"Select..."}),Object(n.jsxs)("div",{className:(o?"block ":"hidden ")+"absolute w-11/12 mt-2 text-base z-50 float-left list-none text-left rounded shadow-lg",children:["loading"===t.status&&Object(n.jsx)("div",{className:"py-2 px-4 text-md font-normal block w-full whitespace-no-wrap bg-white text-gray-600",children:"Loading..."}),"error"===t.status&&Object(n.jsx)("div",{className:"py-2 px-4 text-md font-normal block w-full whitespace-no-wrap bg-white text-gray-600",children:"Error retreiving categories. Please try again later"}),"success"===t.status&&Object(n.jsx)("div",{className:"overflow-x-hidden overflow-y-visible h-56 z-30",children:t.data.map((function(e){return Object(n.jsx)(k,{option:e,handleClick:x},e.slug)}))})]})]})}));function S(){return D.apply(this,arguments)}function D(){return(D=Object(f.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.CancelToken.source(),e.next=3,v.a.get(y,{cancelToken:t.token});case 3:return(a=e.sent).cancel=function(){t.cancel("Query was cancelled")},e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){var e=Object(r.useContext)(o).setModal,t=Object(r.useState)({}),a=Object(l.a)(t,2),c=a[0],s=a[1],i=Object(r.useState)(""),d=Object(l.a)(i,2),u=d[0],x=d[1],h=Object(r.useState)(""),j=Object(l.a)(h,2),m=j[0],f=j[1],g=Object(r.useState)(1),v=Object(l.a)(g,2),w=v[0],y=v[1],N=Object(b.f)(),k=Object(p.b)("categories",S,{staleTime:6e3,cachedTime:6e4,refetchOnWindowFocus:!1}),C=k.data,D=k.status,z=L(u),I=z.inputIsValid,R=z.validationMsg,E=z.itemId;return Object(n.jsx)("div",{className:"relative container mx-auto w-11/12 md:w-8/12 shadow-lg rounded-lg bg-gray-100 my-8",children:Object(n.jsx)("div",{className:"flex flex-wrap",children:Object(n.jsxs)("div",{className:"w-full",children:[Object(n.jsxs)("ul",{className:"flex list-none flex-wrap flex-row",role:"tablist",children:[Object(n.jsx)("li",{className:"text-center flex-auto",children:Object(n.jsx)("a",{className:"font-semibold uppercase px-3 py-3 shadow transition duration-300 hover:shadow-lg rounded block leading-normal "+(1===w?"text-white bg-red-500":"text-red-500 bg-white"),onClick:function(e){e.preventDefault(),y(1)},"data-toggle":"tab",href:"search-by-url",role:"tablist",children:"Search by URL"})}),Object(n.jsx)("li",{className:"text-center flex-auto",children:Object(n.jsx)("a",{className:"font-semibold uppercase px-3 py-3 shadow transition duration-300 hover:shadow-lg rounded block leading-normal "+(2===w?"text-white bg-red-500":"text-red-500 bg-white"),onClick:function(e){e.preventDefault(),y(2)},"data-toggle":"tab",href:"select-category",role:"tablist",children:"Select Category"})})]}),Object(n.jsx)("div",{className:"px-4 py-4",children:Object(n.jsxs)("div",{className:"tab-content tab-space",children:[Object(n.jsx)("div",{className:1===w?"block":"hidden",id:"link1",children:Object(n.jsx)(O,{value:u,handleChange:function(e){x(e.target.value),f("")},error:m})}),Object(n.jsx)("div",{className:2===w?"block":"hidden",id:"link2",children:Object(n.jsx)(T,{options:{data:C,status:D},category:c,changeCategory:s})})]})}),Object(n.jsx)("div",{className:"flex md:justify-center text-center",children:Object(n.jsx)("button",{className:"block w-11/12 justify-center bg-red-500 text-white text-md font-semibold uppercase rounded w-full py-2 mx-2 mb-2 shadow focus:outline-none transition duration-300 hover:shadow-outline",onClick:function(t){t.preventDefault(),1===w?I?e(E):f(R):2===w&&(c.name&&N.push("/categories/".concat(c.slug)),s({}))},children:"Search"})})]})})})}function I(e,t,a){return R.apply(this,arguments)}function R(){return(R=Object(f.a)(m.a.mark((function e(t,a,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.CancelToken.source(),e.next=3,v.a.get("".concat(N,"?category=").concat(n,"&page=").concat(a),{cancelToken:r.token});case 3:return(c=e.sent).cancel=function(){r.cancel("Query was cancelled")},e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){var e=Object(r.useContext)(o).setModal,t=Object(r.useState)(1),a=Object(l.a)(t,2),c=a[0],s=a[1],i=Object(r.useRef)(!1),d=Object(r.useRef)(!1),u=Object(b.g)().category,h=Object(p.a)(["items",c,u],I,{staleTime:6e3,cachedTime:6e4,refetchOnWindowFocus:!1}),j=h.resolvedData,m=h.latestData,f=h.status,g={hiddenFromLeft:function(e){return{x:-50*e,opacity:0}},hiddenFromRight:function(e){return{x:50*e,opacity:0}},visible:function(e){return{x:0,opacity:1,transition:{delay:.025*e,duration:.3}}},removedToRight:{x:100,opacity:0},removedToLeft:{x:-100,opacity:0}};return"loading"===f?Object(n.jsx)("div",{className:"text-4xl font-bold text-white text-center pt-16",children:"Loading..."}):"error"===f?Object(n.jsx)("div",{className:"text-4xl font-bold text-white text-center pt-16",children:"Something went wrong... Please try again"}):"success"===f?Object(n.jsx)("div",{className:"relative container mx-auto w-11/12 sm:w-8/12 sm:my-8",children:j.results.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("ul",{className:"flex justify-center flex-col font-bold leading-normal tracking-wider",children:[Object(n.jsx)(x.b.li,{className:"hidden sm:flex justify-between uppercase font-title rounded-lg py-3 my-2 italic bg-red-500 text-gray-300 shadow-md",initial:{opacity:0},animate:{opacity:1},children:Object(n.jsx)("div",{className:"w-9/12 ml-12 text-left",children:"Product Name"})}),Object(n.jsx)(x.a,{exitBeforeEnter:!0,children:Object(n.jsx)(x.b.div,{children:j.results.map((function(t,a){return Object(n.jsx)(x.b.div,{className:"sm:flex rounded-lg shadow-md cursor-pointer py-3 my-2 bg-gradient-to-r from-red-500 to-indigo-700 text-gray-300 transition duration-300 hover:to-red-500 hover:text-gray-100 hover:shadow-lg",onClick:function(a){return function(t,a){e(a.id)}(0,t)},variants:g,animate:"visible",initial:i.current?"hiddenFromLeft":"hiddenFromRight",exit:i.current?"removedToLeft":"removedToRight",custom:a,whileHover:{scale:1.05},children:Object(n.jsx)("div",{className:"w-9/12 text-left ml-2 sm:ml-8 truncate align-middle",children:t.name})},t.id)}))})})]}),Object(n.jsxs)("div",{className:"flex justify-end w-full pt-2 pr-2 text-gray-300",children:[Object(n.jsx)(x.b.button,{onClick:function(){i.current=!1,d.current=!0,s((function(e){return Math.max(e-1,1)}))},className:"mr-2 bg-red-500 rounded-full h-12 w-12 flex items-center justify-center shadow-md focus:outline-none transition duration-200 hover:shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.7},children:Object(n.jsx)("i",{className:"fas fa-chevron-left"})}),Object(n.jsx)(x.b.button,{onClick:function(){d.current=!1,i.current=!0,s((function(e){return m&&m.next?e+1:e}))},className:"bg-red-500 rounded-full h-12 w-12 flex items-center justify-center shadow-md focus:outline-none transition duration-200 hover:shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.7},children:Object(n.jsx)("i",{className:"fas fa-chevron-right"})})]})]}):Object(n.jsx)("div",{className:"text-4xl font-bold text-white text-center pt-16",children:"No items in this category yet..."})}):void 0}var M=a(33),F=a.n(M);function P(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){var a=function(e){return{labels:e.map((function(e){return e.date})),values:e.map((function(e){return e.value}))}}(e.data),n={type:"line",data:{labels:a.labels,datasets:[{label:"Price",backgroundColor:"#4c51bf",borderColor:"#4c51bf",data:a.values,fill:!1}]},options:{legend:{display:!1},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{ticks:{fontColor:"rgba(128,128,128,.7)"},display:!0,gridLines:{display:!1,borderDash:[2],borderDashOffset:[2],color:"rgba(33, 37, 41, 0.3)",zeroLineColor:"rgba(0, 0, 0, 0)",zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]}}],yAxes:[{ticks:{fontColor:"rgba(128,128,128,.7)"},display:!0,gridLines:{display:!0,borderDash:[3],borderDashOffset:[3],drawBorder:!1,color:"rgba(33, 37, 41, 0.3)",zeroLineColor:"rgba(33, 37, 41, 0)",zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]}}]}}};new F.a(t.current,n)}),[e.data]),Object(n.jsx)("div",{className:"relative",children:Object(n.jsx)("canvas",{ref:t,id:"line-chart"})})}function B(e,t){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.CancelToken.source(),e.next=3,v.a.get("".concat(N,"/").concat(a),{cancelToken:n.token});case 3:return(r=e.sent).cancel=function(){n.cancel("Query was cancelled")},e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){var e=Object(r.useContext)(o),t=e.modal,a=e.setModal,c=Object(r.useRef)(null),s=Object(p.b)(["categories",t],B,{staleTime:6e3,cachedTime:6e4,refetchOnWindowFocus:!1}),i=s.data,l=s.status;return C(c,(function(){return a(null)})),"error"===l?Object(n.jsx)("div",{className:"z-50 fixed top-0 left-0 w-full h-full pt-16 bg-gray-700 bg-opacity-75",children:Object(n.jsxs)("div",{ref:c,className:"relative container mx-auto flex  flex-col w-9/12 h-auto rounded-lg shadow-lg bg-gray-200 py-16",children:[Object(n.jsx)("div",{className:"text-gray-700 font-semibold text-4xl text-center",children:"Something wrong here!"}),Object(n.jsx)("div",{className:"m-4 text-gray-700 font-semibold text-md text-center",children:"Sorry, the item you were looking for could not be found..."})]})}):Object(n.jsx)(x.b.div,{className:"z-50 fixed top-0 left-0 w-full h-full pt-16 bg-gray-700 bg-opacity-75",initial:{opacity:0},animate:{opacity:1},transition:{duration:.7},children:Object(n.jsxs)("div",{ref:c,className:"relative container mx-auto flex  flex-col md:flex-row w-9/12 h-auto rounded-lg shadow-lg bg-gray-200 pt-4 md:pt-0",children:[Object(n.jsxs)("div",{className:"flex justify-center w-4/12 mx-auto my-auto",children:["loading"===l&&Object(n.jsx)("div",{className:"h-40 md:h-64 w-32 md:w-48 shadow-lg rounded-lg border-none bg-gray-400 pb-4 animate-pulse"}),"success"===l&&Object(n.jsx)("div",{className:"bg-gray-100 text-black border-none shadow-lg rounded-lg",children:Object(n.jsx)("img",{alt:"product",src:i.image_url,className:"min-wd-full border-none py-2 px-2"})})]}),Object(n.jsxs)("div",{className:"flex flex-col w-full md:w-8/12 rounded-lg px-2",children:["loading"===l&&Object(n.jsxs)("div",{className:"flex flex-col w-full w-full my-2 pr-4 animate-pulse",children:[Object(n.jsx)("div",{className:"w-full h-16 bg-gray-400 ml-2 my-2"}),Object(n.jsx)("div",{className:"w-8/12 h-12 bg-gray-400 ml-2 my-2"}),Object(n.jsx)("div",{className:"w-full h-40 md:h-80 bg-gray-400 ml-2 my-2"})]}),"success"===l&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"text-3xl font-semibold leading-none text-gray-700 pl-4 md:pl-2 py-4",children:i.name}),Object(n.jsxs)("div",{className:"text-lg uppercase font-bold tracking-wide text-red-600 pl-4 md:pl-2 py-2",children:["Last Price: ",function(e){var t=e[e.length-1];return"".concat(t.value," P")}(i.prices)]}),Object(n.jsx)("div",{className:"pt-2 pb-2 md:pt-4",children:Object(n.jsx)(P,{data:i.prices})})]})]})]})})}function U(e){var t=e.color,a=e.icon,r=e.title,c=e.msg;return Object(n.jsx)("div",{className:"relative flex flex-col min-w-0 break-words bg-white w-full mb-8 shadow-lg rounded-lg transition duration-300",children:Object(n.jsxs)("div",{className:"px-4 py-5 flex-auto",children:[Object(n.jsx)("div",{className:"text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full "+t,children:Object(n.jsx)("i",{className:a})}),Object(n.jsx)("h6",{className:"text-xl font-semibold",children:r}),Object(n.jsx)("p",{className:"mt-2 mb-4 text-gray-600 italic",children:c})]})})}function A(){var e=Object(r.useContext)(o).modal;return Object(n.jsx)(u.a,{basename:"/ozon-parser",children:Object(n.jsxs)("main",{children:[Object(n.jsxs)("div",{className:"relative pt-8 pb-32 bg-indigo-600 overflow-x-hidden",style:{minHeight:"84vh"},children:[Object(n.jsxs)("div",{className:"container relative mx-auto",children:[Object(n.jsxs)("a",{href:"/",className:"flex justify-center items-center flex-wrap overflow-hidden px-4 pb-10 m-auto",children:[Object(n.jsx)("div",{className:"flex md:mr-8",children:Object(n.jsx)(h,{text:"Ozon"})}),Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)(h,{text:"Parser"})})]}),Object(n.jsxs)(b.c,{children:[Object(n.jsxs)(b.a,{exact:!0,path:"/",children:[Object(n.jsx)(z,{}),e&&Object(n.jsx)(V,{})]}),Object(n.jsxs)(b.a,{path:"/categories/:category",children:[Object(n.jsx)(E,{}),e&&Object(n.jsx)(V,{})]}),Object(n.jsxs)(b.a,{path:"*",children:[Object(n.jsx)("div",{className:"text-gray-100 font-semibold text-4xl text-center",children:"This page does not exists!"}),Object(n.jsx)("div",{className:"text-gray-100 font-semibold text-md text-center",children:"Sorry, the page you were looking for could not be found..."})]})]})]}),Object(n.jsx)("div",{className:"top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden",style:{height:"70px",transform:"translateZ(0)"},children:Object(n.jsx)("svg",{className:"absolute bottom-0 overflow-hidden",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 2560 100",x:"0",y:"0",children:Object(n.jsx)("polygon",{className:"text-red-500 fill-current",points:"2560 0 2560 100 0 100"})})})]}),Object(n.jsx)("section",{className:"pb-10 md:pb-20 bg-red-500 -mt-24",children:Object(n.jsx)("div",{className:"container mx-auto px-4",children:Object(n.jsxs)("div",{className:"flex flex-wrap z-10",children:[Object(n.jsx)(x.b.div,{className:"lg:pt-12 pt-6 w-full md:w-4/12 px-4 text-center",whileHover:{scale:1.02},whileTap:{scale:.95},children:Object(n.jsx)(U,{color:"bg-red-400",icon:"fas fa-search",title:"Easy Search",msg:"Search products by site URL, ID or Category"})}),Object(n.jsx)(x.b.div,{className:"w-full md:w-4/12 px-4 text-center",whileHover:{scale:1.02},whileTap:{scale:.95},children:Object(n.jsx)(U,{color:"bg-blue-400",icon:"fas fa-chart-line",title:"Price Charts",msg:"Price history over last several months"})}),Object(n.jsx)(x.b.div,{className:"md:pt-6 px-4 w-full md:w-4/12 text-center",whileHover:{scale:1.02},whileTap:{scale:.95},children:Object(n.jsx)(U,{color:"bg-red-400",icon:"far fa-envelope-open",title:"Subscribe",msg:"Subscribe to receive notifications!"})})]})})})]})})}i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(d,{children:Object(n.jsx)(A,{})})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.28042369.chunk.js.map